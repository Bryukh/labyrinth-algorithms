<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Labyrinth Algorithms</title>

    <link href='http://fonts.googleapis.com/css?family=Roboto:700,400' rel='stylesheet' type='text/css'>

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="js/snap.svg-min.js"></script>
    <script src="js/page.js"></script>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.1.1/gh-fork-ribbon.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/vector.css">
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
</head>
<body>
<div class="github-fork-ribbon-wrapper left">
    <div class="github-fork-ribbon">
        <a href="https://github.com/Bryukh/labyrinth-algorithms">Fork me on GitHub</a>
    </div>
</div>
<div id="header" class="page-header">
    <div class="container">
        <h1>Labyrinth Algorithms</h1>

        <p class="col-md-6">
            How to find a path between two points in the maze. Base Algorithm review for
            <a href="http://www.checkio.org/mission/open-labyrinth/share/574bd1ded68c9705c5d6f07c6206be12/">"Open Labyrinth"</a>
            <a href="http://www.checkio.org/">Checkio</a> mission.
        </p>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-9">
            <h1 id="introduce">Introduce</h1>

            <p>
                Early I've written an <a href="http://www.checkio.org/blog/find-path/">article</a>
                about solutions and algorithms for mission "Open Labyrinth" for CheckiO blog.
                But readers asked about more schemas and interactive explanation.
                And I made this page with labyrinth algorithm explanations.
                You can see how BFS, DFS or A\* queue or stack and how they find a path for
                various labyrinths.
            </p>
            <p>
                All examples are based on original
                <a href="http://www.checkio.org/mission/open-labyrinth/share/574bd1ded68c9705c5d6f07c6206be12/">"Open Labyrinth"</a> mission.
                In this mission you are given the map of a maze,
                and your task is to find a path from one corner to another.
                The maze can be represented as a graph where empty cells are nodes and adjacent cells are connected.
                Because we don't need find the shortest path, we can use various graph-traversal algorithms.
            </p>

            <h1 id="maze2graph">Maze to Graph</h1>

            <p>
                First I would like to change a representation for a maze.
                This part is not necessary and we can detect "neighbours" while search path.
                But for newbies it will be simpler to decompose the problem and first convert
                a maze as 2D array to a graph as a dictionary.
            </p>

            <p>
                Our graph will be represented as a dictionary, where keys are node coordinates and
                values are neighbour node coordinates and direction how to get in it.
                Node coordinates are represented as a tuple with two numbers.
                This way each cell has unique name.
                Directions will be useful to write route when we will search a path inside the maze.
            </p>

            <p>
                First we collect all empty cells and write them as a keys.
                Then gather information about neighbours. Of course we can do this in one iteration through
                a matrix with defaultdict, for example, but I want to show it with simpler for python newbie way.
                For each cell we look ar "south" and "east" neighbours only and add them as "connections".
                And with these "S" and "E" directions we add reverse "N" and "W" connection for neighbour cells.
                This way we will skip duplicate operations.
                Don't forget to check edge cases. And as result we will get our maze to graph convertor.
                Below you can see simple code for it.
            </p>


            <div class="panel panel-default code-panel">
                <div class="panel-heading" role="tab">
                    <h4 class="panel-title">
                        <a class="collapsed " data-toggle="collapse" href="#collapse-maze2graph-code" aria-expanded="false"
                           onclick="toggleCollapsed(this)">
                            Show python code:
                        </a>
                    </h4>
                </div>
                <div id="collapse-maze2graph-code" class="panel-collapse collapse" role="tabpanel">
                    <div class="panel-body">
                        <pre>def maze2graph(maze):
    height = len(maze)
    width = len(maze[0]) if height else 0
    graph = {(i, j): [] for j in range(width) for i in range(height) if not maze[i][j]}
    for row, col in graph.keys():
        if row < height - 1 and not maze[row + 1][col]:
            graph[(row, col)].append(("S", (row + 1, col)))
            graph[(row + 1, col)].append(("N", (row, col)))
        if col < width - 1 and not maze[row][col + 1]:
            graph[(row, col)].append(("E", (row, col + 1)))
            graph[(row, col + 1)].append(("W", (row, col)))
    return graph</pre>
                    </div>
                </div>
            </div>
            <p>
                In these animation you can see how the recent function check neighbours.
                But it's little difficult from Python realisation because py dictionary are unordered.
                But this animation should show you how maze change to "skeleton" form.
            </p>

            <div class="board" id="maze2graph-board">
                <div class="choose-maze center-block">

                </div>
                <svg id="maze-convert"></svg>
                <svg id="maze-graph"></svg>
            </div>

            <h1 id="bfs">Breadth First Search</h1>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
                dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                proident, sunt in culpa qui officia deserunt mollit anim id est laborum
            </p>

            <div class="board" id="maze-bfs-board">
                <div class="choose-maze center-block">

                </div>
                <svg id="maze-bfs"></svg>
            </div>


            <h1 id="dfs">Depth First Search</h1>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
                dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                proident, sunt in culpa qui officia deserunt mollit anim id est laborum
            </p>

            <div class="board" id="maze-dfs-board">
                <div class="choose-maze center-block">

                </div>
                <svg id="maze-dfs"></svg>
            </div>

            <h1 id="astar">A* Search</h1>

            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
                dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
                proident, sunt in culpa qui officia deserunt mollit anim id est laborum
            </p>
            <div class="board" id="maze-astar-board">
                <div class="choose-maze center-block">

                </div>
                <svg id="maze-astar"></svg>
            </div>

        </div>
        <div class="col-md-3">
            <nav id="sidebar">
                <ul class="nav">
                    <li><a href="#introduce">Introduce</a></li>
                    <li><a href="#maze2graph">Maze to Graph</a></li>
                    <li><a href="#bfs">Breadth First Search</a></li>
                    <li><a href="#dfs">Depth First Search</a></li>
                    <li><a href="#astar">A* Search</a></li>


                </ul>
            </nav>
        </div>

    </div>
</div>
<!--<script src="js/sticky.js"></script>-->
<script src="js/labyrinth.js"></script>
<script>
    $.getJSON("js/mazes.json", function (data) {
        var mazeNames = Object.keys(data);
        var $buttonBlockGraph = $("#maze2graph-board").find(".choose-maze");
        var $buttonBlockBfs = $("#maze-bfs-board").find(".choose-maze");
        var $buttonBlockDfs = $("#maze-dfs-board").find(".choose-maze");
        var $buttonBlockAstar = $("#maze-astar-board").find(".choose-maze");

        var maze2graphSvg = Snap("#maze-convert");
        var graphFromMazeSvg = Snap("#maze-graph");
        graphFromMazeSvg.timeouts = [];


        var bfsMazeSvg = Snap("#maze-bfs");
        bfsMazeSvg.timeouts = [];

        var dfsMazeSvg = Snap("#maze-dfs");
        dfsMazeSvg.timeouts = [];

        var astarMazeSvg = Snap("#maze-astar");
        astarMazeSvg.timeouts = [];



        var maze2graph = function (name) {
            maze2graphSvg.clear();
            graphFromMazeSvg.clear();
            for (var t = 0, l = graphFromMazeSvg.timeouts.length; t < l; t++) {
                clearTimeout(graphFromMazeSvg.timeouts[t]);
            }
            var maze = drawMaze(data[name], maze2graphSvg);
            recolorMaze(maze);
            createGraph(data[name], graphFromMazeSvg);
        };

        var bfsMaze = function (name) {
            bfsMazeSvg.clear();
            for (var t = 0, l = bfsMazeSvg.timeouts.length; t < l; t++) {
                clearTimeout(bfsMazeSvg.timeouts[t]);
            }
            var BFSmazeEls = drawMaze(data[name], bfsMazeSvg);
            animateXFSMaze(bfsMazeSvg, data[name], BFSmazeEls);
        };

        var dfsMaze = function (name) {
            dfsMazeSvg.clear();
            for (var t = 0, l = dfsMazeSvg.timeouts.length; t < l; t++) {
                clearTimeout(dfsMazeSvg.timeouts[t]);
            }
            var DFSmazeEls = drawMaze(data[name], dfsMazeSvg);
            animateXFSMaze(dfsMazeSvg, data[name], DFSmazeEls, "dfs");
        };

        var astarMaze = function (name) {
            astarMazeSvg.clear();
            for (var t = 0, l = astarMazeSvg.timeouts.length; t < l; t++) {
                clearTimeout(astarMazeSvg.timeouts[t]);
            }
            var AstarMazeEls = drawMaze(data[name], astarMazeSvg);
            animateXFSMaze(astarMazeSvg, data[name], AstarMazeEls, "astar");
        };





        var addButtons = function ($block, mazeFunc, preId) {
            for (var i = 0; i < mazeNames.length; i++) {
                var $button = $("<button></button>").addClass("btn btn-default choose-button").attr("type", "button");
                $button.attr("id", preId + mazeNames[i]);
                $button.text(mazeNames[i]);
                $button.click(function (n) {
                    return function () {
                        mazeFunc(n);
                    }
                }(mazeNames[i]));
                $block.append($button);
            }
        };

        addButtons($buttonBlockGraph, maze2graph, "maze2graph-btn-");
        addButtons($buttonBlockBfs, bfsMaze, "maze-bfs-btn-");
        addButtons($buttonBlockDfs, dfsMaze, "maze-dfs-btn-");
        addButtons($buttonBlockAstar, astarMaze, "maze-astar-btn-");








        maze2graph(mazeNames[0]);
        bfsMaze(mazeNames[0]);
        dfsMaze(mazeNames[0]);
        astarMaze(mazeNames[0]);

    });


</script>
</body>
</html>